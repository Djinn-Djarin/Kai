{% extends 'base.html' %}
{% load static %}
{% block title %}Home Page{% endblock %}

{% block content %}

<!-- ******************************************************************************************************* -->
</head>
<link rel="stylesheet" type="text/css" href="{% static 'css/packof_next.css' %}">

<!-- ******************************************************************************************************* -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const jsonData = JSON.parse('{{ df_json|escapejs }}');

    if (jsonData.length > 0) {
      createTableHeaders(jsonData);
      displayRecords(jsonData);
      addDropdownToAllRows(); // Call function to add dropdowns after displaying records
    } else {
      console.log("No data to display");
    }

    let gettext = document.querySelectorAll('td');
    let showvalueontop = document.getElementById('showvalueontop')
    Array.from(gettext).forEach((item) => {
      item.addEventListener('mouseover', () => {
        let getData = item.textContent;
        let sumrisedata = getData.replace(/\s+/g, ' ').trim()
        showvalueontop.value = sumrisedata;
      })
    })
  });
</script>
</head>
<!-- ******************************************************************************************************* -->

<div class="mainContainer">


  <div class="mainSideContainer">
    <h2 id="heading">Packof</h2>
    <div class="textAreaWrapper">
      <textarea name="" id="TextArea"></textarea> <!--showvalueontop -->
    </div>

    <form id="inbound_data" method="get" action="/packof">
      <div class="tableDiv">
        <table id="recordsTable">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
      <!-- <button type="submit" id="Sendjsondata" class="button">Submit</button> -->

    </form>
    <div class="scondTableDiv">
      <table id="recordsTable" class="scondtable">
        <thead>
          <tr>
            <th class="maintabledata">ASIN</th>
            <th class="maintabledata">Product Name</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="maintabledata">ASIN</td>
            <td class="maintabledata">Kuber Industries Portable 4 Layer Shoe Storage Organizer| Easy to Installation
              Detachable | Footwear Organiser with Wheel |Door-Entrance Living-Room Balcony Decor| 203-4LA| White</td>
          </tr>
          <tr>
            <td class="maintabledata">ASIN</td>
            <td class="maintabledata"> Multiple Purpose Storage Basket | Rhombic | Bathroom Kitchen Dressing table
              |Toiletry Organizer Bin for Holding Soap, Shampoo,Cosmetics | MC2436 | Light Grey, Orange |</td>
          </tr>
        </tbody>
      </table>
    </div>

   
  </div>






  <!-- ******************************************************************************************************* -->

  <!-- <h3>Color Combination Table</h3> -->

  <!-- <form id="color-combination-form" method="get" action="/packof" style="display: none;">
    <table class="packoftable" name="text">
      <thead>
        <tr>
          <th>Pack of</th>
          <th>Color 1</th>
          <th>Color 2</th>
          <th>Color 3</th>
          <th>Color 4</th>
        </tr>
      </thead>
      <tbody id="table-body">
      </tbody>
    </table>
    <button type="submit" class="button">Submit</button>
  </form> -->

  <!-- ******************************************************************************************************* -->


  <div class="tablecontainer">

    <div class="inputtable">
      <div class="input-container">
        <label for="packof">Pack of:</label>
        <input type="text" id="packof" name="packof">
        <label for="color">Color:</label>
        <input type="text" id="color" name="color">
        <button onclick="generateCells()">Generate Table</button>
      </div>
      <div class="rightsidecontainer">

        <!-- <form action="/receive_data/" method="POST"> -->
        <div class="table-container ">

          <table id="mainTable">

          </table>
      
          <button type="button" id="Sendjsondata">Submit</button>

        </div>
      <!-- </form> -->

      </div>
    </div>

    <div class="bottomcontainer">
      <table id="mainTable">
        <thead>
          <tr>
            <th class="sideTablecenter">Number</th>
            <th class="sideTablecenter">red</th>
            <th class="sideTablecenter">green</th>
            <th class="sideTablecenter">black</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="centernumbers">1</td>
            <td class="centernumbers">2</td>
            <td class="centernumbers">2</td>
            <td class="centernumbers"> 2</td>
          </tr>
          <tr>
            <td class="centernumbers">2</td>
            <td class="centernumbers">4</td>
            <td class="centernumbers">4</td>
            <td class="centernumbers">4</td>
          </tr>
          <tr>
            <td class="centernumbers">3</td>
            <td class="centernumbers">6</td>
            <td class="centernumbers">6</td>
            <td class="centernumbers">6</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script src="{% static 'js/packof_next.js' %}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
      const table = document.getElementById('mainTable');
      const addRowBtn = document.getElementById('addRowBtn');

      addRowBtn.addEventListener('click', function () {
          // Create a new row
          const newRow = table.insertRow();

          // Create and insert new cells and input fields dynamically
          for (let i = 0; i < 3; i++) { // Assume 3 cells per row for this example
              const newCell = newRow.insertCell();
              const input = document.createElement('input');
              input.type = 'text';
              input.name = `cell_${table.rows.length}_${i}`; // Unique name for each input
              newCell.appendChild(input);
          }
      });

      document.querySelector('form').addEventListener('submit', function (event) {
          // Before submission, gather all input values into hidden fields
          const allInputs = table.querySelectorAll('input');
          allInputs.forEach(input => {
              const hiddenInput = document.createElement('input');
              hiddenInput.type = 'hidden';
              hiddenInput.name = input.name;
              hiddenInput.value = input.value;
              this.appendChild(hiddenInput);
          });
      });
  });
</script>

{% endblock %}